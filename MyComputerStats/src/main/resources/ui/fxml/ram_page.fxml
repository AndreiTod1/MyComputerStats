<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.ui.ram.RamPageController"
            fitToWidth="true"
            hbarPolicy="NEVER"
            vbarPolicy="AS_NEEDED"
            styleClass="scroll-pane">
        <VBox spacing="15" styleClass="stats-container" alignment="TOP_CENTER">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>

            <!-- MEMORY INFO HEADER -->
            <VBox styleClass="info-card" alignment="CENTER" spacing="10">
                <Label text="ðŸ’¾ MEMORY INFORMATION" styleClass="section-header" style="-fx-font-size: 18px;"/>
                <HBox spacing="50" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Total" styleClass="info-label"/>
                        <Label fx:id="totalMemoryLabel" text="0 GB" styleClass="value-label"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Type" styleClass="info-label"/>
                        <Label fx:id="memoryTypeLabel" text="Unknown" styleClass="value-label"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Speed" styleClass="info-label"/>
                        <Label fx:id="memorySpeedLabel" text="0 MHz" styleClass="value-label"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- RAM USAGE CARD -->
            <VBox styleClass="info-card" alignment="CENTER" spacing="12">
                <Label text="ðŸ“Š CURRENT USAGE" styleClass="section-header" style="-fx-font-size: 18px;"/>
                
                <HBox spacing="50" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Used" styleClass="info-label"/>
                        <Label fx:id="usedMemoryLabel" text="0 GB" styleClass="value-label"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Available" styleClass="info-label"/>
                        <Label fx:id="availableMemoryLabel" text="0 GB" styleClass="value-label" style="-fx-text-fill: #00ff9d;"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Usage" styleClass="info-label"/>
                        <Label fx:id="usagePercentLabel" text="0%" styleClass="value-label"/>
                    </VBox>
                </HBox>
                
                <ProgressBar fx:id="usageBar" prefWidth="500" prefHeight="14" progress="0" styleClass="progress-bar"/>
            </VBox>

            <!-- HISTORY CHART -->
            <VBox styleClass="info-card" spacing="10" alignment="CENTER" VBox.vgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER">
                    <Label text="ðŸ“ˆ USAGE HISTORY" styleClass="section-header" style="-fx-font-size: 18px;"/>
                    <javafx.scene.control.ToggleButton fx:id="chartModeUsage" text="Used (GB)" 
                        style="-fx-background-color: #00f2ff; -fx-text-fill: black; -fx-font-size: 11px; -fx-cursor: hand; -fx-background-radius: 15; -fx-padding: 5 15;"/>
                </HBox>
                <LineChart fx:id="ramChart" prefHeight="350" animated="false" legendVisible="false"
                           horizontalGridLinesVisible="true" verticalGridLinesVisible="true"
                           HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                    <xAxis>
                        <NumberAxis fx:id="xAxis" forceZeroInRange="false" tickLabelsVisible="true" 
                                    style="-fx-tick-label-fill: #00f2ff;"/>
                    </xAxis>
                    <yAxis>
                        <NumberAxis fx:id="yAxis" autoRanging="false" lowerBound="0" upperBound="16" tickUnit="4"
                                    style="-fx-tick-label-fill: #00f2ff;"/>
                    </yAxis>
                </LineChart>
            </VBox>

            <!-- SESSION STATISTICS -->
            <VBox styleClass="info-card" spacing="12" alignment="CENTER">
                <HBox alignment="CENTER" spacing="15">
                    <Label text="ðŸ“Š SESSION STATISTICS" styleClass="section-header" style="-fx-font-size: 18px;"/>
                    <javafx.scene.control.Button text="âŸ³ Reset" onAction="#handleResetStats"
                        style="-fx-background-color: transparent; -fx-border-color: #555; -fx-border-radius: 5; -fx-text-fill: #aaa; -fx-font-size: 10px; -fx-cursor: hand; -fx-padding: 4 10;"/>
                </HBox>
                
                <HBox spacing="50" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Average Usage" styleClass="info-label"/>
                        <Label fx:id="avgUsageLabel" text="0%" styleClass="value-label"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4">
                        <Label text="Samples" styleClass="info-label"/>
                        <Label fx:id="sampleCountLabel" text="0" styleClass="value-label" style="-fx-text-fill: #00ff9d;"/>
                    </VBox>
                </HBox>
                
                <javafx.scene.control.ToggleButton fx:id="showDetailsToggle" text="Show Details â–¼" onAction="#handleToggleDetails"
                    style="-fx-background-color: #333; -fx-text-fill: #aaa; -fx-font-size: 11px; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 5 15;"/>
                
                <javafx.scene.layout.GridPane fx:id="detailsGrid" hgap="25" vgap="8" alignment="CENTER" managed="false" visible="false">
                    <Label text="Metric" styleClass="info-label" style="-fx-font-weight: bold;" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <Label text="Min" styleClass="info-label" style="-fx-font-weight: bold;" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                    <Label text="Avg" styleClass="info-label" style="-fx-font-weight: bold;" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <Label text="Max" styleClass="info-label" style="-fx-font-weight: bold;" GridPane.columnIndex="3" GridPane.rowIndex="0"/>
                    
                    <Label text="Usage %" styleClass="info-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <Label fx:id="minUsageLabel" text="0%" styleClass="value-label" style="-fx-text-fill: #00f2ff;" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    <Label fx:id="avgUsageDetailLabel" text="0%" styleClass="value-label" style="-fx-text-fill: #00f2ff;" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                    <Label fx:id="maxUsageLabel" text="0%" styleClass="value-label" style="-fx-text-fill: #00f2ff;" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <Label text="Used (GB)" styleClass="info-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <Label fx:id="minMBLabel" text="0 GB" styleClass="value-label" style="-fx-text-fill: #00ff9d;" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                    <Label fx:id="avgMBDetailLabel" text="0 GB" styleClass="value-label" style="-fx-text-fill: #00ff9d;" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                    <Label fx:id="maxMBLabel" text="0 GB" styleClass="value-label" style="-fx-text-fill: #00ff9d;" GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                </javafx.scene.layout.GridPane>
            </VBox>
    </VBox>
</ScrollPane>
